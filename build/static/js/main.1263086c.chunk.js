(this["webpackJsonplogin-tutorial"]=this["webpackJsonplogin-tutorial"]||[]).push([[0],{37:function(e,t,a){e.exports=a(73)},65:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(18),o=a.n(l),c=a(11),u=a(76),s=a(77),i=a(5),m=a(14),p=a.n(m),E=a(13),f=a(9),b=function(e){return{type:"LOGIN",user:e}},g=function(e){var t=Object(i.f)();return r.a.createElement(s.a,Object.assign({onClick:function(){t.goBack()}},e),e.children)},h=function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),l=a[0],o=a[1],m=Object(n.useState)(""),h=Object(c.a)(m,2),d=h[0],O=h[1],v=Object(n.useState)(""),j=Object(c.a)(v,2),S=j[0],y=j[1],w=Object(i.f)(),k=(Object(f.c)((function(e){return e.auth})),Object(f.b)());return r.a.createElement(u.a,{className:"form-wrap"},r.a.createElement(g,{variant:"dark"},"Go back"),r.a.createElement(u.a.Group,null,r.a.createElement(u.a.Label,null,"Username or Email"),r.a.createElement(u.a.Control,{type:"text",placeholder:"Enter your username or email",name:"identifier",value:l,onChange:function(e){o(e.target.value)}})),r.a.createElement(u.a.Group,null,r.a.createElement(u.a.Label,null,"Password"),r.a.createElement(u.a.Control,{type:"password",placeholder:"Enter your username or email",name:"password",value:d,onChange:function(e){O(e.target.value)}})),r.a.createElement(s.a,{variant:"primary",onClick:function(){p.a.post("https://bff-training.et.r.appspot.com/auth/local",{identifier:l,password:d}).then((function(e){e?(console.log(e),localStorage.setItem("token",e.data.jwt),localStorage.setItem("user",e.data.user.username),k(b(e.data.user.username)),w.push("/")):y("No response from server")})).catch((function(e){console.log(e.response),y("Some error occured")}))}},"Submit"),r.a.createElement("div",{style:{color:"red"}},S),r.a.createElement("div",null,"Don't have an account ? ",r.a.createElement(E.b,{to:"/register"},"register here")))},d=function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),l=a[0],o=a[1],m=Object(n.useState)(""),E=Object(c.a)(m,2),f=E[0],b=E[1],h=Object(n.useState)(""),d=Object(c.a)(h,2),O=d[0],v=d[1],j=Object(n.useState)(),S=Object(c.a)(j,2),y=S[0],w=S[1],k=Object(i.f)();return r.a.createElement(u.a,{className:"form-wrap"},r.a.createElement(g,{variant:"dark"},"Go back"),r.a.createElement(u.a.Group,null,r.a.createElement(u.a.Label,null,"Username"),r.a.createElement(u.a.Control,{type:"text",placeholder:"Enter your username",name:"username",value:l,onChange:function(e){o(e.target.value)}})),r.a.createElement(u.a.Group,null,r.a.createElement(u.a.Label,null,"Password"),r.a.createElement(u.a.Control,{type:"password",placeholder:"Enter your password",name:"password",value:f,onChange:function(e){b(e.target.value)}})),r.a.createElement(u.a.Group,null,r.a.createElement(u.a.Label,null,"Email"),r.a.createElement(u.a.Control,{type:"email",placeholder:"someone@domain.com",name:"email",value:O,onChange:function(e){v(e.target.value)}})),r.a.createElement(s.a,{variant:"primary",onClick:function(){p.a.post("https://bff-training.et.r.appspot.com/auth/local/register",{username:l,email:O,password:f}).then((function(e){e?k.push("/login"):w("No response from server")})).catch((function(e){console.log(e.response),w("some error")}))}},"Submit"),r.a.createElement("span",null,y))},O=a(74),v=a(75),j=function(e){var t=Object(i.f)(),a=Object(f.c)((function(e){return e.auth})),l=Object(f.b)(),o=Object(n.useState)(null),u=Object(c.a)(o,2),m=u[0],E=u[1];return r.a.createElement(O.a,null,r.a.createElement(v.a,{style:{marginTop:"9%"}},r.a.createElement("h1",null,"Welcome to homepage!"),!a.isAuthorized&&r.a.createElement("span",null,r.a.createElement("p",null,"If you need access to sensitive information, login first"),r.a.createElement(s.a,{variant:"primary",onClick:function(){t.push("/login")}},"Login")),a.isAuthorized&&r.a.createElement("span",null,r.a.createElement("p",null,"Hello ",a.user),r.a.createElement(s.a,{variant:"warning",onClick:function(){m?E(null):p.a.get("https://bff-training.et.r.appspot.com/sensitive-data",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){var t=e.data.map((function(e){return r.a.createElement("li",{key:e._id},e.data)}));E(t)})).catch((function(e){return console.log(e)}))}},"See secret"),r.a.createElement("ul",null,m),r.a.createElement(s.a,{varaint:"secondary",onClick:function(){l({type:"LOGOUT"}),localStorage.removeItem("token"),localStorage.removeItem("user")}},"Log out"))))},S=(a(65),a(66)),y=function(e){Object(f.c)((function(e){return e.auth}));var t=Object(f.b)();return Object(n.useEffect)((function(){var e=localStorage.getItem("token");try{console.log(S(e)),t(b(localStorage.getItem("user")))}catch(a){console.log(a)}}),[]),r.a.createElement(E.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/login"},r.a.createElement(O.a,null,r.a.createElement(h,null))),r.a.createElement(i.a,{path:"/register"},r.a.createElement(O.a,null,r.a.createElement(d,null))),r.a.createElement(i.a,{path:"/"},r.a.createElement(j,null))))},w=(a(69),a(72),a(15)),k={isAuthorized:!1,user:{}},C=Object(w.b)({auth:function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOGIN":return{isAuthorized:!0,user:e.user};case"LOGOUT":default:return k}}}),I=Object(w.c)(C,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(r.a.createElement(f.a,{store:I},r.a.createElement(y,null)),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.1263086c.chunk.js.map