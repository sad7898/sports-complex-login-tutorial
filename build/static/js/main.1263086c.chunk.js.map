{"version":3,"sources":["components/store/actions/userActions.js","components/backButton.jsx","components/loginForm.jsx","components/registerForm.jsx","components/homepage.jsx","components/main.jsx","components/store/reducers/rootReducer.js","components/store/store.js","index.jsx"],"names":["setCurrentUser","userData","type","user","BackButton","props","history","useHistory","Button","onClick","goBack","children","FormLogin","useState","setUser","password","setPassword","error","setError","dispatch","useSelector","state","auth","useDispatch","Form","className","variant","Group","Label","Control","placeholder","name","value","onChange","e","target","axios","post","identifier","then","res","console","log","localStorage","setItem","data","jwt","username","push","catch","err","response","style","color","to","Register","email","setEmail","Home","secret","setSecret","Container","Jumbotron","marginTop","isAuthorized","Axios","get","headers","getItem","dataArr","map","val","key","_id","varaint","removeItem","jwtDecode","require","Main","useEffect","token","path","initialState","rootReducer","combineReducers","action","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1263086c.chunk.js","sourcesContent":["export const setCurrentUser = (userData) => {\r\n    return {\r\n        type: \"LOGIN\",\r\n        user: userData\r\n    }\r\n}\r\nexport const setLogOut = () => {\r\n    return {\r\n        type: \"LOGOUT\"\r\n    }\r\n}","import React, { useState, useEffect } from 'react';\r\nimport {Button} from 'react-bootstrap';\r\nimport {useHistory} from 'react-router-dom';\r\nconst BackButton = (props) => {\r\n    let history = useHistory()\r\n    const onClick = () => {\r\n        history.goBack()\r\n    }\r\n    return (\r\n        <Button onClick={onClick} {...props}>{props.children}</Button>\r\n    )\r\n}\r\nexport default BackButton","import React, { useState, useEffect } from 'react';\r\nimport {Form,Col,Row,Button} from 'react-bootstrap';\r\nimport {useHistory} from 'react-router-dom'\r\nimport axios from 'axios';\r\nimport {Link} from 'react-router-dom';\r\nimport {useDispatch,useSelector} from 'react-redux'\r\nimport {setCurrentUser} from './store/actions/userActions.js'\r\nimport BackButton from './backButton.jsx';\r\nconst FormLogin = (props) => {\r\n    let [user,setUser] = useState('')\r\n    let [password,setPassword] = useState('')\r\n    let [error,setError] = useState('')\r\n    let history = useHistory();\r\n    let auth = useSelector(state => state.auth)\r\n    let dispatch = useDispatch()\r\n    const handleChangeUser = (e) => {\r\n        setUser(e.target.value)\r\n    }\r\n    const handleChangePassword = (e) => {\r\n        setPassword(e.target.value)\r\n    }\r\n    const onSubmit = () => {\r\n        axios.post('https://bff-training.et.r.appspot.com/auth/local',{identifier: user,password: password})\r\n        .then((res) => {\r\n            if (!res) setError(\"No response from server\")\r\n            else {\r\n                console.log(res)\r\n                localStorage.setItem(\"token\",res.data.jwt)\r\n                localStorage.setItem('user',res.data.user.username)\r\n                dispatch(setCurrentUser(res.data.user.username))\r\n                history.push('/')\r\n            }\r\n        })\r\n        .catch((err) => {\r\n            console.log(err.response)\r\n            setError(\"Some error occured\")\r\n        })\r\n    }\r\n    return (\r\n       <Form className=\"form-wrap\">\r\n           <BackButton variant='dark'>Go back</BackButton>\r\n           <Form.Group>\r\n               <Form.Label>Username or Email</Form.Label>\r\n               <Form.Control type=\"text\" placeholder=\"Enter your username or email\" name=\"identifier\" value={user} onChange={handleChangeUser}/>\r\n           </Form.Group>\r\n           <Form.Group>\r\n               <Form.Label>Password</Form.Label>\r\n               <Form.Control type=\"password\" placeholder=\"Enter your username or email\" name=\"password\" value={password} onChange={handleChangePassword}/>\r\n           </Form.Group>\r\n           <Button variant=\"primary\" onClick={onSubmit}>Submit</Button>\r\n           <div style={{color:\"red\"}}>{error}</div>\r\n           <div>Don't have an account ? <Link to=\"/register\">register here</Link></div>\r\n       </Form>\r\n    )\r\n}\r\nexport default FormLogin;","import React, { useState, useEffect } from 'react';\r\nimport {Form,Col,Row,Button} from 'react-bootstrap';\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport {useHistory} from 'react-router-dom';\r\nimport axios from 'axios'\r\nimport BackButton from './backButton.jsx';\r\nconst Register = (props) => {\r\n    let [user,setUser] = useState('')\r\n    let [password,setPassword] = useState('')\r\n    let [email,setEmail] = useState('')\r\n    let [error,setError] = useState()\r\n    let history = useHistory();\r\n    const handleChangeUser = (e) => {\r\n        setUser(e.target.value)\r\n    }\r\n    const handleChangePassword = (e) => {\r\n        setPassword(e.target.value)\r\n    }\r\n    const handleChangeEmail = (e) => {\r\n        setEmail(e.target.value)\r\n    }\r\n    const onSubmit = () => {\r\n        axios.post(\"https://bff-training.et.r.appspot.com/auth/local/register\", {username:user,email:email,password:password})\r\n        .then((res) => {\r\n            if (res) history.push('/login')\r\n            else setError(\"No response from server\")\r\n        })\r\n        .catch((err) => {\r\n            console.log(err.response)\r\n            setError(\"some error\")\r\n        })\r\n    }\r\n    return (\r\n    <Form className=\"form-wrap\">\r\n        <BackButton variant=\"dark\">Go back</BackButton>\r\n        <Form.Group>\r\n            <Form.Label>Username</Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"Enter your username\" name=\"username\" value={user} onChange={handleChangeUser}/>\r\n        </Form.Group>\r\n        <Form.Group>\r\n            <Form.Label>Password</Form.Label>\r\n            <Form.Control type=\"password\" placeholder=\"Enter your password\" name=\"password\" value={password} onChange={handleChangePassword}/>\r\n        </Form.Group>\r\n        <Form.Group>\r\n            <Form.Label>Email</Form.Label>\r\n            <Form.Control type=\"email\" placeholder=\"someone@domain.com\" name=\"email\" value={email} onChange={handleChangeEmail}/>\r\n        </Form.Group>\r\n        <Button variant=\"primary\" onClick={onSubmit}>Submit</Button>\r\n        <span>{error}</span>\r\n    </Form>\r\n    )\r\n}\r\nexport default Register;","import React, { useState, useEffect } from 'react';\r\nimport {Container,Jumbotron,Button} from 'react-bootstrap'\r\nimport {Link} from 'react-router-dom';\r\nimport {useHistory} from 'react-router-dom';\r\nimport {useSelector,useDispatch} from 'react-redux';\r\nimport {setLogOut} from './store/actions/userActions.js'\r\nimport Axios from 'axios';\r\nconst Home =(props) => {\r\n    let history=useHistory();\r\n    let auth = useSelector(state => state.auth);\r\n    let dispatch = useDispatch()\r\n    let [secret,setSecret] = useState(null);\r\n    const handleClick =() => {\r\n        if (!secret) {Axios.get('https://bff-training.et.r.appspot.com/sensitive-data', {headers: {'Authorization': `Bearer ${localStorage.getItem('token')}` }})\r\n        .then((res) => {\r\n            const dataArr = (res.data).map((val) => (<li key={val._id}>{val.data}</li>))\r\n            setSecret(dataArr)\r\n        })\r\n        .catch((err) => (console.log(err)))}\r\n        else setSecret(null)\r\n    }\r\n    const handleLogOut = () => {\r\n        dispatch(setLogOut())\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('user');\r\n    }\r\n    return (\r\n        <Container>\r\n            <Jumbotron style={{marginTop: \"9%\"}}>\r\n                <h1>Welcome to homepage!</h1>\r\n                    { !auth.isAuthorized && <span>\r\n                        <p>If you need access to sensitive information, login first</p>\r\n                        <Button variant=\"primary\" onClick={() => {history.push('/login')}}>Login</Button>\r\n                    </span> }\r\n                    { auth.isAuthorized && <span>\r\n                        <p>Hello {auth.user}</p>\r\n                        <Button variant=\"warning\" onClick={handleClick}>See secret</Button>\r\n                        <ul>\r\n                            {secret}\r\n                        </ul>\r\n                        <Button varaint=\"secondary\" onClick={handleLogOut}>Log out</Button>\r\n                        </span>}\r\n            </Jumbotron>\r\n        </Container>\r\n    )\r\n}\r\nexport default Home;","import React, { useState, useEffect } from 'react';\r\nimport FormLogin from './loginForm.jsx'\r\nimport Register from './registerForm.jsx'\r\nimport Home from './homepage.jsx';\r\nimport {BrowserRouter as Router, Route, Switch,Link} from 'react-router-dom';\r\nimport {useSelector,useDispatch} from 'react-redux';\r\nimport {setCurrentUser} from './store/actions/userActions.js'\r\nimport {Container} from 'react-bootstrap';\r\nimport './style/style.css'\r\nvar jwtDecode = require('jwt-decode');\r\nconst Main = (props) => {\r\n    let auth = useSelector(state => state.auth);\r\n    let dispatch = useDispatch();\r\n    useEffect(() => {\r\n      const token = localStorage.getItem('token')\r\n      try{\r\n          console.log(jwtDecode(token))\r\n          dispatch(setCurrentUser(localStorage.getItem('user')))\r\n        }\r\n    catch (err){\r\n        console.log(err)\r\n    }\r\n    },[])\r\n   \r\n    return (\r\n        <Router>\r\n            <Switch>\r\n                <Route path=\"/login\">\r\n                    <Container>\r\n                        <FormLogin/>\r\n                    </Container>\r\n                </Route>\r\n                <Route path=\"/register\">\r\n                    <Container>\r\n                        <Register></Register>\r\n                    </Container>\r\n                </Route>\r\n                <Route path=\"/\">\r\n                    <Home></Home>\r\n                </Route>\r\n            </Switch>\r\n        </Router>\r\n    )\r\n}\r\nexport default Main","import { combineReducers } from \"redux\"\r\n\r\nconst initialState = {\r\n    isAuthorized:false,\r\n    user: {}\r\n}\r\n    const authReducer = (state=initialState,action) => {\r\n    switch(action.type){\r\n        case('LOGIN'):\r\n            return ({\r\n                isAuthorized: true,\r\n                user: action.user\r\n            })\r\n        case('LOGOUT'):\r\n            return initialState\r\n        default:\r\n            return initialState\r\n    }\r\n}\r\nexport const rootReducer = combineReducers({\r\n    auth : authReducer\r\n})","import {createStore} from 'redux';\r\nimport {rootReducer} from './reducers/rootReducer.js';\r\nconst store = createStore(\r\n    rootReducer,\r\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n    )\r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom'\r\nimport Main from './components/main.jsx'\r\nimport 'bootstrap'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport store from './components/store/store.js';\r\nimport {Provider} from 'react-redux'\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <Main/>\r\n    </Provider>\r\n\r\n\r\n,document.getElementById('root'))"],"sourceRoot":""}